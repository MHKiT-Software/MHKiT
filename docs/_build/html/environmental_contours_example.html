

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-164358105-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-164358105-1');
    </script>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MHKiT Environmental Contours &mdash; MHKiT v0.9.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5b801204" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=5ea31d45" />
      <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="_static/css/mhkit.css?v=20290a2c" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=c20ff342"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MLER example" href="extreme_response_MLER_example.html" />
    <link rel="prev" title="MHKiT CDIP IO" href="cdip_example.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MHKiT
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">MHKiT-Python Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="matlab_installation.html">MHKiT-MATLAB Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Module Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="examples.html#overview">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="examples.html#all-python-notebooks">All Python Notebooks</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ADCP_Delft3D_TRTS_example.html">Comparing Transect Data at the Tanana River Test Site</a></li>
<li class="toctree-l3"><a class="reference internal" href="Delft3D_example.html">Delft3D IO Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="PacWave_resource_characterization_example.html">PacWave Resource Assessment</a></li>
<li class="toctree-l3"><a class="reference internal" href="SWAN_example.html">MHKiT SWAN Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="WPTO_hindcast_example.html">MHKiT WPTO Hindcast Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="acoustics_example.html">Analyzing Passive Acoustic Data with MHKiT</a></li>
<li class="toctree-l3"><a class="reference internal" href="adcp_example.html">Analyzing ADCP Data with MHKiT</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv_example.html">Reading ADV Data with MHKiT</a></li>
<li class="toctree-l3"><a class="reference internal" href="cdip_example.html">MHKiT CDIP IO</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">MHKiT Environmental Contours</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#1.-Request-Spectral-Wave-Density-Data-from-NDBC">1. Request Spectral Wave Density Data from NDBC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#2.-Calculate-H_{m0}-and-T_e-using-the-NDBC-Data">2. Calculate <span class="math notranslate nohighlight">\(H_{m0}\)</span> and <span class="math notranslate nohighlight">\(T_e\)</span> using the NDBC Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#3.-Find-the-contour-line-for-the-100-year">3. Find the contour line for the 100 year</a></li>
<li class="toctree-l4"><a class="reference internal" href="#4.-Plot-overlay-of-the-data-and-contour">4. Plot overlay of the data and contour</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Other-Contour-Methods">Other Contour Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Resource-Clusters">Resource Clusters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_MLER_example.html">MLER example</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_contour_example.html">Extreme Conditions Modeling - Contour Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_full_sea_state_example.html">Extreme Conditions Modeling - Full Sea State Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="loads_example.html">MHKiT Loads Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="metocean_example.html">MHKiT Metocean Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="mooring_example.html">Mooring Module Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="power_example.html">MHKiT Power Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="qc_example.html">MHKiT Quality Control Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="river_example.html">MHKiT River Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="short_term_extremes_example.html">MHKit Short-term Extreme Loads</a></li>
<li class="toctree-l3"><a class="reference internal" href="strain_measurement_example.html">Strain Measurement Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="tidal_example.html">MHKiT Tidal Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tidal_performance_example.html">Tidal Power Performance Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="upcrossing_example.html">MHKit Upcrossing Analysis Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="wave_example.html">MHKiT Wave Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="wecsim_example.html">MHKiT WEC-Sim Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="directional_waves.html">Directional Wave Spectrum from NDBC Buoys</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="webinars.html">Webinars</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="citeus.html">Cite Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Online Forum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MHKiT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="examples.html">Examples</a></li>
      <li class="breadcrumb-item active">MHKiT Environmental Contours</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/environmental_contours_example.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="MHKiT-Environmental-Contours">
<h1>MHKiT Environmental Contours<a class="headerlink" href="#MHKiT-Environmental-Contours" title="Link to this heading"></a></h1>
<p>Environmental contours of extreme sea states can be used as a part of reliability-based design for offshore structures, including wave energy converters (WECs). Environmental contours provide estimations of extreme sea states based on short-term data (e.g. 10 years used to estimate a 100-year event). These environmental contours describe extreme sea states by characterizing the resource, defining sea states for extreme condition analysis, and developing a framework for analyzing survivability of
a design.</p>
<p>MHKiT includes functions adapted from the <a class="reference external" href="https://github.com/WEC-Sim/WDRT">WDRT</a> for creating environmental contours of extreme sea states using a principal component analysis (PCA) methodology, with additional improvements for characterizing the joint probability distribution of sea states. As a demonstration, this notebook will walk through the following steps to find a 100-year sea state for NDBC buoy 46022 using 16 years of spectral wave density data.</p>
<ol class="arabic simple">
<li><p>Request Spectral Wave Density Data from NDBC</p></li>
<li><p>Calculate Hm0 and Te using the requested data</p></li>
<li><p>Find the data’s 100-year contour</p></li>
<li><p>Plot the data and the 100-year contour</p></li>
</ol>
<p>We will start by importing the necessary python packages (<code class="docutils literal notranslate"><span class="pre">scipy</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy</span></code>), and MHKiT <code class="docutils literal notranslate"><span class="pre">wave</span></code> submodules (<code class="docutils literal notranslate"><span class="pre">resource</span></code>, <code class="docutils literal notranslate"><span class="pre">contours</span></code>, <code class="docutils literal notranslate"><span class="pre">graphics</span></code>, and <code class="docutils literal notranslate"><span class="pre">io.ndbc</span></code>).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mhkit.wave</span><span class="w"> </span><span class="kn">import</span> <span class="n">resource</span><span class="p">,</span> <span class="n">contours</span><span class="p">,</span> <span class="n">graphics</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mhkit.wave.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">ndbc</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy</span><span class="w"> </span><span class="kn">import</span> <span class="n">stats</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</pre></div>
</div>
</div>
<section id="1.-Request-Spectral-Wave-Density-Data-from-NDBC">
<h2>1. Request Spectral Wave Density Data from NDBC<a class="headerlink" href="#1.-Request-Spectral-Wave-Density-Data-from-NDBC" title="Link to this heading"></a></h2>
<p>MHKiT can be used to request historical data from the National Data Buoy Center (<a class="reference external" href="https://www.ndbc.noaa.gov/">NDBC</a>). This process is split into the following steps:</p>
<ul class="simple">
<li><p>Query available NDBC data</p></li>
<li><p>Select years of interest</p></li>
<li><p>Request Data from NDBC</p></li>
<li><p>Convert the DataFrames to DateTime Index</p></li>
</ul>
<section id="Query-available-NDBC-data">
<h3>Query available NDBC data<a class="headerlink" href="#Query-available-NDBC-data" title="Link to this heading"></a></h3>
<p>Looking at the help for the <code class="docutils literal notranslate"><span class="pre">ndbc.available_data</span></code> function (<code class="docutils literal notranslate"><span class="pre">help(ndbc.available_data)</span></code>) the function requires a parameter to be specified and optionally the user may provide a station ID as a string. A full list of available historical parameters can be found <a class="reference external" href="https://www.ndbc.noaa.gov/data/historical/">here</a> although only some of these are currently supported. We are interested in historical spectral wave density data <code class="docutils literal notranslate"><span class="pre">'swden'</span></code> (from which we may calculate Hm0 and Te). Additionally,
we will specify the buoy number as <code class="docutils literal notranslate"><span class="pre">'46022'</span></code> to only return data associated with this site.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify the parameter as spectral wave density and the buoy number to be 46022</span>
<span class="n">parameter</span> <span class="o">=</span> <span class="s2">&quot;swden&quot;</span>
<span class="n">buoy_number</span> <span class="o">=</span> <span class="s2">&quot;46022&quot;</span>
<span class="n">ndbc_available_data</span> <span class="o">=</span> <span class="n">ndbc</span><span class="o">.</span><span class="n">available_data</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">buoy_number</span><span class="p">)</span>
<span class="n">ndbc_available_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>year</th>
      <th>filename</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1658</th>
      <td>46022</td>
      <td>1996</td>
      <td>46022w1996.txt.gz</td>
    </tr>
    <tr>
      <th>1659</th>
      <td>46022</td>
      <td>1997</td>
      <td>46022w1997.txt.gz</td>
    </tr>
    <tr>
      <th>1660</th>
      <td>46022</td>
      <td>1998</td>
      <td>46022w1998.txt.gz</td>
    </tr>
    <tr>
      <th>1661</th>
      <td>46022</td>
      <td>1999</td>
      <td>46022w1999.txt.gz</td>
    </tr>
    <tr>
      <th>1662</th>
      <td>46022</td>
      <td>2000</td>
      <td>46022w2000.txt.gz</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Select-years-of-interest">
<h3>Select years of interest<a class="headerlink" href="#Select-years-of-interest" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ndbc.available_data</span></code> function has returned a DataFrame with columns ‘id’, ‘year’, and ‘filename’. The year column is of type int while the filename and id (5 digit alpha-numeric specifier) are of type string. In this case, the years returned from <code class="docutils literal notranslate"><span class="pre">ndbc_available_data</span></code> span 1996 to the last complete year the buoy was operational (currently 2019 for 46022). For demonstration, we have decided we are interested in the data between the years 1996 and 2012 so we will create a new
<code class="docutils literal notranslate"><span class="pre">years_of_interest</span></code> DataFrame which only contains years less than 2013.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Slice the available data to only include through year 2012</span>
<span class="n">years_of_interest</span> <span class="o">=</span> <span class="n">ndbc_available_data</span><span class="p">[</span><span class="n">ndbc_available_data</span><span class="o">.</span><span class="n">year</span> <span class="o">&lt;</span> <span class="mi">2013</span><span class="p">]</span>
<span class="n">years_of_interest</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>year</th>
      <th>filename</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1658</th>
      <td>46022</td>
      <td>1996</td>
      <td>46022w1996.txt.gz</td>
    </tr>
    <tr>
      <th>1659</th>
      <td>46022</td>
      <td>1997</td>
      <td>46022w1997.txt.gz</td>
    </tr>
    <tr>
      <th>1660</th>
      <td>46022</td>
      <td>1998</td>
      <td>46022w1998.txt.gz</td>
    </tr>
    <tr>
      <th>1661</th>
      <td>46022</td>
      <td>1999</td>
      <td>46022w1999.txt.gz</td>
    </tr>
    <tr>
      <th>1662</th>
      <td>46022</td>
      <td>2000</td>
      <td>46022w2000.txt.gz</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Request-Data-from-NDBC">
<h3>Request Data from NDBC<a class="headerlink" href="#Request-Data-from-NDBC" title="Link to this heading"></a></h3>
<p>The filename column in our <code class="docutils literal notranslate"><span class="pre">years_of_interest</span></code> DataFrame and the parameter is needed to request the data. To get the data we can use the <code class="docutils literal notranslate"><span class="pre">ndbc.request_data</span></code> function to iterate over each buoy id and year in the passed DataFrame. This function will return the parameter data as a dictionary of DataFrames which may be accessed by buoy id and then the year for multiple buoys or just the year for a single buoy.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get dictionary of parameter data by year</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="n">years_of_interest</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span>
<span class="n">ndbc_requested_data</span> <span class="o">=</span> <span class="n">ndbc</span><span class="o">.</span><span class="n">request_data</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">filenames</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Convert-the-DataFrames-to-DateTime-Index">
<h3>Convert the DataFrames to DateTime Index<a class="headerlink" href="#Convert-the-DataFrames-to-DateTime-Index" title="Link to this heading"></a></h3>
<p>The data returned for each year has a variable number of columns for the year, month, day, hour, minute, and the way the columns are formatted (this is a primary reason for return a dictionary of DataFrames indexed by years). A common step a user will want to take is to remove the inconsistent NDBC date/ time columns and create a standard DateTime index. The MHKiT function <code class="docutils literal notranslate"><span class="pre">ndbc.to_datetime_index</span></code> will perform this standardization by parsing the NDBC date/ time columns into DateTime format and
setting this as the DataFrame Index and removing the NDBC date/ time columns. This function operates on a DateFrame therefore we will iterate over each year of the <code class="docutils literal notranslate"><span class="pre">ndbc_requested_data</span></code> dictionary.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lastly we will convert a DateTime Index</span>
<span class="n">ndbc_data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># Create a Datetime Index and remove NOAA date columns for each year</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">ndbc_requested_data</span><span class="p">:</span>
    <span class="n">year_data</span> <span class="o">=</span> <span class="n">ndbc_requested_data</span><span class="p">[</span><span class="n">year</span><span class="p">]</span>
    <span class="n">ndbc_data</span><span class="p">[</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="n">ndbc</span><span class="o">.</span><span class="n">to_datetime_index</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">year_data</span><span class="p">)</span>

<span class="c1"># Display DataFrame of 46022 data from 1996</span>
<span class="n">ndbc_data</span><span class="p">[</span><span class="s2">&quot;1996&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0.03</th>
      <th>0.04</th>
      <th>0.05</th>
      <th>0.06</th>
      <th>0.07</th>
      <th>0.08</th>
      <th>0.09</th>
      <th>0.10</th>
      <th>0.11</th>
      <th>0.12</th>
      <th>...</th>
      <th>0.31</th>
      <th>0.32</th>
      <th>0.33</th>
      <th>0.34</th>
      <th>0.35</th>
      <th>0.36</th>
      <th>0.37</th>
      <th>0.38</th>
      <th>0.39</th>
      <th>0.40</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1996-01-01 00:00:00</th>
      <td>0.0</td>
      <td>2.11</td>
      <td>27.49</td>
      <td>41.63</td>
      <td>27.23</td>
      <td>17.09</td>
      <td>8.61</td>
      <td>5.05</td>
      <td>3.73</td>
      <td>2.82</td>
      <td>...</td>
      <td>0.17</td>
      <td>0.16</td>
      <td>0.14</td>
      <td>0.15</td>
      <td>0.13</td>
      <td>0.09</td>
      <td>0.09</td>
      <td>0.08</td>
      <td>0.06</td>
      <td>0.06</td>
    </tr>
    <tr>
      <th>1996-01-01 01:00:00</th>
      <td>0.0</td>
      <td>1.20</td>
      <td>25.13</td>
      <td>57.69</td>
      <td>32.59</td>
      <td>11.75</td>
      <td>6.33</td>
      <td>4.16</td>
      <td>4.22</td>
      <td>2.98</td>
      <td>...</td>
      <td>0.22</td>
      <td>0.18</td>
      <td>0.20</td>
      <td>0.10</td>
      <td>0.12</td>
      <td>0.10</td>
      <td>0.07</td>
      <td>0.07</td>
      <td>0.05</td>
      <td>0.04</td>
    </tr>
    <tr>
      <th>1996-01-01 02:00:00</th>
      <td>0.0</td>
      <td>0.90</td>
      <td>15.98</td>
      <td>48.98</td>
      <td>37.98</td>
      <td>23.56</td>
      <td>11.87</td>
      <td>6.80</td>
      <td>3.75</td>
      <td>3.00</td>
      <td>...</td>
      <td>0.14</td>
      <td>0.15</td>
      <td>0.20</td>
      <td>0.12</td>
      <td>0.08</td>
      <td>0.08</td>
      <td>0.07</td>
      <td>0.09</td>
      <td>0.07</td>
      <td>0.05</td>
    </tr>
    <tr>
      <th>1996-01-01 03:00:00</th>
      <td>0.0</td>
      <td>0.38</td>
      <td>14.73</td>
      <td>38.55</td>
      <td>34.99</td>
      <td>14.79</td>
      <td>9.23</td>
      <td>5.54</td>
      <td>4.43</td>
      <td>2.99</td>
      <td>...</td>
      <td>0.17</td>
      <td>0.20</td>
      <td>0.17</td>
      <td>0.14</td>
      <td>0.12</td>
      <td>0.09</td>
      <td>0.07</td>
      <td>0.05</td>
      <td>0.06</td>
      <td>0.04</td>
    </tr>
    <tr>
      <th>1996-01-01 04:00:00</th>
      <td>0.0</td>
      <td>0.12</td>
      <td>22.77</td>
      <td>52.11</td>
      <td>34.88</td>
      <td>18.90</td>
      <td>13.36</td>
      <td>7.49</td>
      <td>2.94</td>
      <td>2.55</td>
      <td>...</td>
      <td>0.12</td>
      <td>0.11</td>
      <td>0.09</td>
      <td>0.13</td>
      <td>0.10</td>
      <td>0.08</td>
      <td>0.08</td>
      <td>0.07</td>
      <td>0.03</td>
      <td>0.03</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 38 columns</p>
</div></div>
</div>
</section>
</section>
<section id="2.-Calculate-H_{m0}-and-T_e-using-the-NDBC-Data">
<h2>2. Calculate <span class="math notranslate nohighlight">\(H_{m0}\)</span> and <span class="math notranslate nohighlight">\(T_e\)</span> using the NDBC Data<a class="headerlink" href="#2.-Calculate-H_{m0}-and-T_e-using-the-NDBC-Data" title="Link to this heading"></a></h2>
<p>A sea state may be characterized by significant wave height (Hm0) and energy period (Te). Using the historical spectral wave density data from NDBC, we can calculate these variables using MHKiT. Both Hm0 and Te return a single value for a given time (e.g. DateTime index). Currently, the data remains as a dictionary of DataFrames because the frequency binning (range and discretization) change across years of NDBC data. Once we have a single value for each DateTime we can combine all the data into
a single DataFrame.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Intialize empty lists to store the results from each year</span>
<span class="n">Hm0_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Te_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Iterate over each year and save the result in the initalized dictionary</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">ndbc_data</span><span class="p">:</span>
    <span class="n">year_data</span> <span class="o">=</span> <span class="n">ndbc_data</span><span class="p">[</span><span class="n">year</span><span class="p">]</span>
    <span class="n">Hm0_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">significant_wave_height</span><span class="p">(</span><span class="n">year_data</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
    <span class="n">Te_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">energy_period</span><span class="p">(</span><span class="n">year_data</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>

<span class="c1"># Concatenate each list of Series into a single Series</span>
<span class="n">Te</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">Te_list</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Hm0</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">Hm0_list</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Name each Series and concat into a dataFrame</span>
<span class="n">Te</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Te&#39;</span>
<span class="n">Hm0</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Hm0&#39;</span>
<span class="n">Hm0_Te</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">Hm0</span><span class="p">,</span> <span class="n">Te</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Drop any NaNs created from the calculation of Hm0 or Te</span>
<span class="n">Hm0_Te</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Sort the DateTime index</span>
<span class="n">Hm0_Te</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">Hm0_Te</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Hm0</th>
      <th>Te</th>
    </tr>
    <tr>
      <th>index</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1996-01-01 00:00:00</th>
      <td>4.819627</td>
      <td>14.856398</td>
    </tr>
    <tr>
      <th>1996-01-01 01:00:00</th>
      <td>5.004158</td>
      <td>14.961679</td>
    </tr>
    <tr>
      <th>1996-01-01 02:00:00</th>
      <td>5.091169</td>
      <td>14.244618</td>
    </tr>
    <tr>
      <th>1996-01-01 03:00:00</th>
      <td>4.679487</td>
      <td>14.042246</td>
    </tr>
    <tr>
      <th>1996-01-01 04:00:00</th>
      <td>5.140895</td>
      <td>14.478961</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2012-12-31 19:00:00</th>
      <td>1.995194</td>
      <td>14.757854</td>
    </tr>
    <tr>
      <th>2012-12-31 20:00:00</th>
      <td>1.976259</td>
      <td>14.360242</td>
    </tr>
    <tr>
      <th>2012-12-31 21:00:00</th>
      <td>2.658421</td>
      <td>15.708162</td>
    </tr>
    <tr>
      <th>2012-12-31 22:00:00</th>
      <td>2.364910</td>
      <td>15.247587</td>
    </tr>
    <tr>
      <th>2012-12-31 23:00:00</th>
      <td>2.056891</td>
      <td>14.328179</td>
    </tr>
  </tbody>
</table>
<p>125410 rows × 2 columns</p>
</div></div>
</div>
</section>
<section id="3.-Find-the-contour-line-for-the-100-year">
<h2>3. Find the contour line for the 100 year<a class="headerlink" href="#3.-Find-the-contour-line-for-the-100-year" title="Link to this heading"></a></h2>
<p>With the sea state data calculated, we can now use the modified I-FORM method to define reliability for a 100-year sea state based on the 17 years of spectral wave density data obtained from NDBC for buoy 46022. Reliability is the likelihood that a certain event will not occur in a given period. The period will define a line of constant probability in the joint probability of <span class="math notranslate nohighlight">\(H_{m0}\)</span> and <span class="math notranslate nohighlight">\(T_e\)</span> but individually each component different reliability (marginal distribution) which we can
find by evaluating a normal cumulative distribution function (CDF). This CDF returns each component’s quantiles along the iso-reliability line that finally allows us to calculate each sea state value (e.g. the 100-year contour values for Hm0 and Te).</p>
<p>For more detail on the environmental contour method used here please refer to: <a class="reference external" href="https://www.sciencedirect.com/science/article/abs/pii/S0029801815006721">Eckert-Gallup et. al 2016</a></p>
<p>To apply the <code class="docutils literal notranslate"><span class="pre">environmental_contours</span></code> function we will specify a 100-year sea state, the sea state data (Hm0, Te), and the time difference between measurements (dt in seconds).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Return period (years) of interest</span>
<span class="n">period</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c1"># Remove Hm0 Outliers</span>
<span class="n">Hm0_Te_clean</span> <span class="o">=</span> <span class="n">Hm0_Te</span><span class="p">[</span><span class="n">Hm0_Te</span><span class="o">.</span><span class="n">Hm0</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">]</span>

<span class="c1"># Get only the values from the DataFrame</span>
<span class="n">Hm0</span> <span class="o">=</span> <span class="n">Hm0_Te_clean</span><span class="o">.</span><span class="n">Hm0</span><span class="o">.</span><span class="n">values</span>
<span class="n">Te</span> <span class="o">=</span> <span class="n">Hm0_Te_clean</span><span class="o">.</span><span class="n">Te</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># Delta time of sea-states</span>
<span class="n">dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">Hm0_Te_clean</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">Hm0_Te_clean</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">seconds</span>

<span class="c1"># Get the contour values</span>
<span class="n">copula</span> <span class="o">=</span> <span class="n">contours</span><span class="o">.</span><span class="n">environmental_contours</span><span class="p">(</span><span class="n">Hm0</span><span class="p">,</span> <span class="n">Te</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="s2">&quot;PCA&quot;</span><span class="p">,</span> <span class="n">return_PCA</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">Hm0_contour</span> <span class="o">=</span> <span class="n">copula</span><span class="p">[</span><span class="s2">&quot;PCA_x1&quot;</span><span class="p">]</span>
<span class="n">Te_contour</span> <span class="o">=</span> <span class="n">copula</span><span class="p">[</span><span class="s2">&quot;PCA_x2&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</section>
<section id="4.-Plot-overlay-of-the-data-and-contour">
<h2>4. Plot overlay of the data and contour<a class="headerlink" href="#4.-Plot-overlay-of-the-data-and-contour" title="Link to this heading"></a></h2>
<p>Lastly we can use the MHKiT graphics module to create a contour plot which shows the data and resultant conotour line.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="c1"># %matplotlib inline</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">plot_environmental_contour</span><span class="p">(</span>
    <span class="n">Te</span><span class="p">,</span>
    <span class="n">Hm0</span><span class="p">,</span>
    <span class="n">Te_contour</span><span class="p">,</span>
    <span class="n">Hm0_contour</span><span class="p">,</span>
    <span class="n">data_label</span><span class="o">=</span><span class="s2">&quot;NDBC 46022&quot;</span><span class="p">,</span>
    <span class="n">contour_label</span><span class="o">=</span><span class="s2">&quot;100 Year Contour&quot;</span><span class="p">,</span>
    <span class="n">x_label</span><span class="o">=</span><span class="s2">&quot;Energy Period, $Te$ [s]&quot;</span><span class="p">,</span>
    <span class="n">y_label</span><span class="o">=</span><span class="s2">&quot;Sig. wave height, $Hm0$ [m]&quot;</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/environmental_contours_example_15_0.png" src="_images/environmental_contours_example_15_0.png" />
</div>
</div>
</section>
<section id="Other-Contour-Methods">
<h2>Other Contour Methods<a class="headerlink" href="#Other-Contour-Methods" title="Link to this heading"></a></h2>
<p>MHKiT has parametric, nonparametric, and Kernel Density Estimation methods for calculating environmental contours housed within the <code class="docutils literal notranslate"><span class="pre">resource.environmental_contours</span></code> function. We can compare other copulas to our PCA method simply by adding more methods. A single string method can be applied if only one copula is of interest as was done above for the PCA method or multiple methods can be sent in using a list of strings. If mutiple methods of the same type are desired is recommended to run them
at the same time if possible as it will reduce the computational expense by utilizing the common computational calls across the copulas. In the example below we will compare the parametric and nonparametric Gaussain contours to the PCA method we ran previously.</p>
<p>We start by using the default settings for our Gaussian methods. The <code class="docutils literal notranslate"><span class="pre">environmental_contours</span></code> function returns a dictionary with component ‘x1’ and ‘x2’ for each method. E.g. if the <code class="docutils literal notranslate"><span class="pre">environmental_contours</span></code> function were called with the <code class="docutils literal notranslate"><span class="pre">'gaussian'</span></code> method then <code class="docutils literal notranslate"><span class="pre">environmental_contours</span></code> function would return a dictionary with keys <code class="docutils literal notranslate"><span class="pre">['gaussian_x1',</span> <span class="pre">'gaussian_x2']</span></code>. The copula methods are a generalized mathematical method and therefore ‘x1’ and ‘x2’ are used in place of Hm0 and Te for the
component values. ‘x1’ refers to the first array passed and ‘x2’ refers to the second array passed. In the example below ‘x1’ would refer to the Hm0 component of the coupla and ‘x2’ would refer to Te.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">copulas</span> <span class="o">=</span> <span class="n">contours</span><span class="o">.</span><span class="n">environmental_contours</span><span class="p">(</span>
    <span class="n">Hm0</span><span class="p">,</span> <span class="n">Te</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;gaussian&quot;</span><span class="p">,</span> <span class="s2">&quot;nonparametric_gaussian&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">Tes</span> <span class="o">=</span> <span class="p">[</span><span class="n">Te_contour</span><span class="p">]</span>
<span class="n">Hm0s</span> <span class="o">=</span> <span class="p">[</span><span class="n">Hm0_contour</span><span class="p">]</span>
<span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;gaussian&quot;</span><span class="p">,</span> <span class="s2">&quot;nonparametric_gaussian&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">methods</span><span class="p">:</span>
    <span class="n">Hm0s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copulas</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">_x1&quot;</span><span class="p">])</span>
    <span class="n">Tes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copulas</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">_x2&quot;</span><span class="p">])</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">plot_environmental_contour</span><span class="p">(</span>
    <span class="n">Te</span><span class="p">,</span>
    <span class="n">Hm0</span><span class="p">,</span>
    <span class="n">Tes</span><span class="p">,</span>
    <span class="n">Hm0s</span><span class="p">,</span>
    <span class="n">data_label</span><span class="o">=</span><span class="s2">&quot;NDBC 46050&quot;</span><span class="p">,</span>
    <span class="n">contour_label</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;PCA&quot;</span><span class="p">,</span> <span class="s2">&quot;Gaussian&quot;</span><span class="p">,</span> <span class="s2">&quot;Nonparametric Gaussian&quot;</span><span class="p">],</span>
    <span class="n">x_label</span><span class="o">=</span><span class="s2">&quot;Energy Period, $Te$ [s]&quot;</span><span class="p">,</span>
    <span class="n">y_label</span><span class="o">=</span><span class="s2">&quot;Sig. wave height, $Hm0$ [m]&quot;</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/environmental_contours_example_17_0.png" src="_images/environmental_contours_example_17_0.png" />
</div>
</div>
</section>
<section id="Resource-Clusters">
<h2>Resource Clusters<a class="headerlink" href="#Resource-Clusters" title="Link to this heading"></a></h2>
<p>Often in resource characterization we want to pick a few representative sea state to run an alaysis. To do this with the resource data in python we reccomend using a Gaussian Mixture Model (a more generalized k-means clustering method). Using sckitlearn this is very straight forward. We combine our Hm0 and Te data into an N x 2 numpy array. We specify our number of components (number of representative sea states) and then call the fit method on the data. Fianlly, using the methods <code class="docutils literal notranslate"><span class="pre">means_</span></code> and
<code class="docutils literal notranslate"><span class="pre">weights</span></code> we can organize the results into an easily digestable table.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Intialize empty lists to store the results from each year</span>
<span class="n">Hm0_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Tp_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Iterate over each year and save the result in the initalized dictionary</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">ndbc_data</span><span class="p">:</span>
    <span class="n">year_data</span> <span class="o">=</span> <span class="n">ndbc_data</span><span class="p">[</span><span class="n">year</span><span class="p">]</span>
    <span class="n">Hm0_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">significant_wave_height</span><span class="p">(</span><span class="n">year_data</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
    <span class="n">Tp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">peak_period</span><span class="p">(</span><span class="n">year_data</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>

<span class="c1"># Concatenate each list of Series into a single Series</span>
<span class="n">Tp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">Tp_list</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Hm0</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">Hm0_list</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Name each Series and concat into a dataFrame</span>
<span class="n">Tp</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Tp&#39;</span>
<span class="n">Hm0</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Hm0&#39;</span>
<span class="n">Hm0_Tp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">Hm0</span><span class="p">,</span> <span class="n">Tp</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Drop any NaNs created from the calculation of Hm0 or Te</span>
<span class="n">Hm0_Tp</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Sort the DateTime index</span>
<span class="n">Hm0_Tp</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Remove Hm0 Outliers</span>
<span class="n">Hm0_Tp_clean</span> <span class="o">=</span> <span class="n">Hm0_Tp</span><span class="p">[</span><span class="n">Hm0_Tp</span><span class="o">.</span><span class="n">Hm0</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">]</span>
<span class="n">Hm0_Tp_clean</span> <span class="o">=</span> <span class="n">Hm0_Tp</span><span class="p">[</span><span class="n">Hm0_Tp</span><span class="o">.</span><span class="n">Tp</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">]</span>

<span class="c1"># Get only the values from the DataFrame</span>
<span class="n">Hm0</span> <span class="o">=</span> <span class="n">Hm0_Tp_clean</span><span class="o">.</span><span class="n">Hm0</span><span class="o">.</span><span class="n">values</span>
<span class="n">Tp</span> <span class="o">=</span> <span class="n">Hm0_Tp_clean</span><span class="o">.</span><span class="n">Tp</span><span class="o">.</span><span class="n">values</span>


<span class="n">Hm0_Tp</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Hm0</th>
      <th>Tp</th>
    </tr>
    <tr>
      <th>index</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1996-01-01 00:00:00</th>
      <td>4.819627</td>
      <td>16.666667</td>
    </tr>
    <tr>
      <th>1996-01-01 01:00:00</th>
      <td>5.004158</td>
      <td>16.666667</td>
    </tr>
    <tr>
      <th>1996-01-01 02:00:00</th>
      <td>5.091169</td>
      <td>16.666667</td>
    </tr>
    <tr>
      <th>1996-01-01 03:00:00</th>
      <td>4.679487</td>
      <td>16.666667</td>
    </tr>
    <tr>
      <th>1996-01-01 04:00:00</th>
      <td>5.140895</td>
      <td>16.666667</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2012-12-31 19:00:00</th>
      <td>1.995194</td>
      <td>19.047619</td>
    </tr>
    <tr>
      <th>2012-12-31 20:00:00</th>
      <td>1.976259</td>
      <td>17.391304</td>
    </tr>
    <tr>
      <th>2012-12-31 21:00:00</th>
      <td>2.658421</td>
      <td>17.391304</td>
    </tr>
    <tr>
      <th>2012-12-31 22:00:00</th>
      <td>2.364910</td>
      <td>17.391304</td>
    </tr>
    <tr>
      <th>2012-12-31 23:00:00</th>
      <td>2.056891</td>
      <td>17.391304</td>
    </tr>
  </tbody>
</table>
<p>125426 rows × 2 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.mixture</span><span class="w"> </span><span class="kn">import</span> <span class="n">GaussianMixture</span>

<span class="c1"># Compute Gaussian Mixture Model</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">Tp</span><span class="p">,</span> <span class="n">Hm0</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="n">gmm</span> <span class="o">=</span> <span class="n">GaussianMixture</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="c1"># Save centers and weights</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">gmm</span><span class="o">.</span><span class="n">means_</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Tp&quot;</span><span class="p">,</span> <span class="s2">&quot;Hm0&quot;</span><span class="p">])</span>
<span class="n">results</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gmm</span><span class="o">.</span><span class="n">weights_</span>
<span class="n">results</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Tp</th>
      <th>Hm0</th>
      <th>weights</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7.529565</td>
      <td>1.595490</td>
      <td>0.182459</td>
    </tr>
    <tr>
      <th>1</th>
      <td>12.115343</td>
      <td>2.669366</td>
      <td>0.219278</td>
    </tr>
    <tr>
      <th>2</th>
      <td>16.567481</td>
      <td>2.636207</td>
      <td>0.073010</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10.216278</td>
      <td>1.743338</td>
      <td>0.160776</td>
    </tr>
    <tr>
      <th>4</th>
      <td>13.455188</td>
      <td>4.738885</td>
      <td>0.041351</td>
    </tr>
    <tr>
      <th>5</th>
      <td>8.692400</td>
      <td>2.779776</td>
      <td>0.171362</td>
    </tr>
    <tr>
      <th>6</th>
      <td>19.900045</td>
      <td>2.707808</td>
      <td>0.018114</td>
    </tr>
    <tr>
      <th>7</th>
      <td>14.290462</td>
      <td>2.808907</td>
      <td>0.133650</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<section id="Viewing-the-Clusters">
<h3>Viewing the Clusters<a class="headerlink" href="#Viewing-the-Clusters" title="Link to this heading"></a></h3>
<p>We can visually look at the clusters by predicting which cluster each datapoint belongs in. Then we can plot the means on top of this to show where each cluster is centered and how the data points are being catagorized.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot the Sections of Data</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">gmm</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">Tp</span><span class="p">,</span> <span class="n">Hm0</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">Tp</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">Hm0</span><span class="p">,</span> <span class="s2">&quot;m+&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Peak Period, $Tp$ [s]&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Sig. wave height, $Hm0$ [m]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0, 0.5, &#39;Sig. wave height, $Hm0$ [m]&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/environmental_contours_example_22_1.png" src="_images/environmental_contours_example_22_1.png" />
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cdip_example.html" class="btn btn-neutral float-left" title="MHKiT CDIP IO" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="extreme_response_MLER_example.html" class="btn btn-neutral float-right" title="MLER example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, National Renewable Energy Laboratory, Pacific Northwest National Laboratory, and Sandia National Laboratories.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>