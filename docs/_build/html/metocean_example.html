

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-164358105-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-164358105-1');
    </script>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MHKiT Metocean Data &mdash; MHKiT v0.9.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5b801204" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=5ea31d45" />
      <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="_static/css/mhkit.css?v=20290a2c" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=c20ff342"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Mooring Module Example" href="mooring_example.html" />
    <link rel="prev" title="MHKiT Loads Module" href="loads_example.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MHKiT
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">MHKiT-Python Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="matlab_installation.html">MHKiT-MATLAB Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Module Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="examples.html#overview">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="examples.html#all-python-notebooks">All Python Notebooks</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ADCP_Delft3D_TRTS_example.html">Comparing Transect Data at the Tanana River Test Site</a></li>
<li class="toctree-l3"><a class="reference internal" href="Delft3D_example.html">Delft3D IO Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="PacWave_resource_characterization_example.html">PacWave Resource Assessment</a></li>
<li class="toctree-l3"><a class="reference internal" href="SWAN_example.html">MHKiT SWAN Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="WPTO_hindcast_example.html">MHKiT WPTO Hindcast Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="acoustics_example.html">Analyzing Passive Acoustic Data with MHKiT</a></li>
<li class="toctree-l3"><a class="reference internal" href="adcp_example.html">Analyzing ADCP Data with MHKiT</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv_example.html">Reading ADV Data with MHKiT</a></li>
<li class="toctree-l3"><a class="reference internal" href="cdip_example.html">MHKiT CDIP IO</a></li>
<li class="toctree-l3"><a class="reference internal" href="environmental_contours_example.html">MHKiT Environmental Contours</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_MLER_example.html">MLER example</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_contour_example.html">Extreme Conditions Modeling - Contour Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_full_sea_state_example.html">Extreme Conditions Modeling - Full Sea State Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="loads_example.html">MHKiT Loads Module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">MHKiT Metocean Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#1.-Request-Continuous-Wind-Data-from-NDBC">1. Request Continuous Wind Data from NDBC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#2.-Request-Surface-Wind-Data-from-WIND-Toolkit">2. Request Surface Wind Data from WIND Toolkit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Using-the-WIND-Toolkit-MHKiT-Functions">Using the WIND Toolkit MHKiT Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#3.-Compare-NDBC-and-WIND-Toolkit-Data">3. Compare NDBC and WIND Toolkit Data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mooring_example.html">Mooring Module Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="power_example.html">MHKiT Power Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="qc_example.html">MHKiT Quality Control Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="river_example.html">MHKiT River Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="short_term_extremes_example.html">MHKit Short-term Extreme Loads</a></li>
<li class="toctree-l3"><a class="reference internal" href="strain_measurement_example.html">Strain Measurement Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="tidal_example.html">MHKiT Tidal Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tidal_performance_example.html">Tidal Power Performance Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="upcrossing_example.html">MHKit Upcrossing Analysis Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="wave_example.html">MHKiT Wave Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="wecsim_example.html">MHKiT WEC-Sim Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="directional_waves.html">Directional Wave Spectrum from NDBC Buoys</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="webinars.html">Webinars</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="citeus.html">Cite Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Online Forum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MHKiT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="examples.html">Examples</a></li>
      <li class="breadcrumb-item active">MHKiT Metocean Data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/metocean_example.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="MHKiT-Metocean-Data">
<h1>MHKiT Metocean Data<a class="headerlink" href="#MHKiT-Metocean-Data" title="Link to this heading">ÔÉÅ</a></h1>
<p>Metocean data is a useful addition to wave and current ocean data for the design for offshore structures, including wave energy converters (WECs). Metocean data primarily includes information pertaining to the wind, wave, and climate conditions within and over the ocean at a given location.</p>
<p>MHKiT‚Äôs <code class="docutils literal notranslate"><span class="pre">wave.io.ndbc</span></code> module includes functions to request and manipulate metocean data from the National Data Buoy Center, including spectral wave density, standard meteorological data and continuous wind speed. The <code class="docutils literal notranslate"><span class="pre">wave.io.hindcast.wind_toolkit</span></code> module includes function to request and manipulate metocean data from the WIND Toolkit datasets including precipitation rate, relative humidity and vertical profiles of wind speed, wind direction, precipitation, temperature, and pressure.</p>
<p>As a demonstration, this notebook will walk through the following steps to compare the surface wind speed and direction at a given location using both NDBC and WIND Toolkit data, and then plot a vertical air temperature profile with WIND Toolkit data.</p>
<ol class="arabic simple">
<li><p>Request Continous Wind Data from NDBC</p></li>
<li><p>Request Surface Wind Data from WIND Toolkit</p></li>
<li><p>Compare NDBC and WIND Toolkit Data</p></li>
<li><p>Request Temperature Data from WIND Toolkit</p></li>
<li><p>Visualize Temperature Data</p></li>
</ol>
<p>We will start by importing the necessary python packages (<code class="docutils literal notranslate"><span class="pre">pandas</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>), and MHKiT submodule (<code class="docutils literal notranslate"><span class="pre">wave.io</span></code>).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mhkit.wave.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">ndbc</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mhkit.wave.io.hindcast</span><span class="w"> </span><span class="kn">import</span> <span class="n">wind_toolkit</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mhkit.tidal.graphics</span><span class="w"> </span><span class="kn">import</span> <span class="n">plot_rose</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mhkit.tidal.graphics</span><span class="w"> </span><span class="kn">import</span> <span class="n">plot_joint_probability_distribution</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</pre></div>
</div>
</div>
<section id="1.-Request-Continuous-Wind-Data-from-NDBC">
<h2>1. Request Continuous Wind Data from NDBC<a class="headerlink" href="#1.-Request-Continuous-Wind-Data-from-NDBC" title="Link to this heading">ÔÉÅ</a></h2>
<p>MHKiT can be used to request historical data from the National Data Buoy Center (<a class="reference external" href="https://www.ndbc.noaa.gov/">NDBC</a>). This process is split into the following steps:</p>
<ul class="simple">
<li><p>Query available NDBC data</p></li>
<li><p>Select years of interest</p></li>
<li><p>Request data from NDBC</p></li>
<li><p>Convert the DataFrames to DateTime Index</p></li>
</ul>
<section id="Query-available-NDBC-data">
<h3>Query available NDBC data<a class="headerlink" href="#Query-available-NDBC-data" title="Link to this heading">ÔÉÅ</a></h3>
<p>Looking at the help for the <code class="docutils literal notranslate"><span class="pre">ndbc.available_data</span></code> function (<code class="docutils literal notranslate"><span class="pre">help(ndbc.available_data)</span></code>) the function requires a parameter to be specified and optionally the user may provide a station ID as a string. A full list of available historical parameters can be found <a class="reference external" href="https://www.ndbc.noaa.gov/data/historical/">here</a> although only some of these are currently supported. We are interested in historical continuous wind data <code class="docutils literal notranslate"><span class="pre">'cwind'</span></code>. Additionally, we will specify the buoy number as <code class="docutils literal notranslate"><span class="pre">'46022'</span></code>
to only return data associated with this site.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify the parameter as continuous wind speeds and the buoy number to be 46022</span>
<span class="n">ndbc_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;parameter&quot;</span><span class="p">:</span> <span class="s2">&quot;cwind&quot;</span><span class="p">,</span> <span class="s2">&quot;buoy_number&quot;</span><span class="p">:</span> <span class="s2">&quot;46022&quot;</span><span class="p">}</span>
<span class="n">available_data</span> <span class="o">=</span> <span class="n">ndbc</span><span class="o">.</span><span class="n">available_data</span><span class="p">(</span><span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;parameter&quot;</span><span class="p">],</span> <span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;buoy_number&quot;</span><span class="p">])</span>
<span class="n">available_data</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>year</th>
      <th>filename</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1215</th>
      <td>46022</td>
      <td>1996</td>
      <td>46022c1996.txt.gz</td>
    </tr>
    <tr>
      <th>1216</th>
      <td>46022</td>
      <td>1997</td>
      <td>46022c1997.txt.gz</td>
    </tr>
    <tr>
      <th>1217</th>
      <td>46022</td>
      <td>1998</td>
      <td>46022c1998.txt.gz</td>
    </tr>
    <tr>
      <th>1218</th>
      <td>46022</td>
      <td>1999</td>
      <td>46022c1999.txt.gz</td>
    </tr>
    <tr>
      <th>1219</th>
      <td>46022</td>
      <td>2000</td>
      <td>46022c2000.txt.gz</td>
    </tr>
    <tr>
      <th>1220</th>
      <td>46022</td>
      <td>2001</td>
      <td>46022c2001.txt.gz</td>
    </tr>
    <tr>
      <th>1221</th>
      <td>46022</td>
      <td>2002</td>
      <td>46022c2002.txt.gz</td>
    </tr>
    <tr>
      <th>1222</th>
      <td>46022</td>
      <td>2003</td>
      <td>46022c2003.txt.gz</td>
    </tr>
    <tr>
      <th>1223</th>
      <td>46022</td>
      <td>2004</td>
      <td>46022c2004.txt.gz</td>
    </tr>
    <tr>
      <th>1224</th>
      <td>46022</td>
      <td>2005</td>
      <td>46022c2005.txt.gz</td>
    </tr>
    <tr>
      <th>1225</th>
      <td>46022</td>
      <td>2006</td>
      <td>46022c2006.txt.gz</td>
    </tr>
    <tr>
      <th>1226</th>
      <td>46022</td>
      <td>2007</td>
      <td>46022c2007.txt.gz</td>
    </tr>
    <tr>
      <th>1227</th>
      <td>46022</td>
      <td>2008</td>
      <td>46022c2008.txt.gz</td>
    </tr>
    <tr>
      <th>1228</th>
      <td>46022</td>
      <td>2009</td>
      <td>46022c2009.txt.gz</td>
    </tr>
    <tr>
      <th>1229</th>
      <td>46022</td>
      <td>2010</td>
      <td>46022c2010.txt.gz</td>
    </tr>
    <tr>
      <th>1230</th>
      <td>46022</td>
      <td>2011</td>
      <td>46022c2011.txt.gz</td>
    </tr>
    <tr>
      <th>1231</th>
      <td>46022</td>
      <td>2012</td>
      <td>46022c2012.txt.gz</td>
    </tr>
    <tr>
      <th>1232</th>
      <td>46022</td>
      <td>2013</td>
      <td>46022c2013.txt.gz</td>
    </tr>
    <tr>
      <th>1233</th>
      <td>46022</td>
      <td>2014</td>
      <td>46022c2014.txt.gz</td>
    </tr>
    <tr>
      <th>1234</th>
      <td>46022</td>
      <td>2015</td>
      <td>46022c2015.txt.gz</td>
    </tr>
    <tr>
      <th>1235</th>
      <td>46022</td>
      <td>2016</td>
      <td>46022c2016.txt.gz</td>
    </tr>
    <tr>
      <th>1236</th>
      <td>46022</td>
      <td>2017</td>
      <td>46022c2017.txt.gz</td>
    </tr>
    <tr>
      <th>1237</th>
      <td>46022</td>
      <td>2018</td>
      <td>46022c2018.txt.gz</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Select-years-of-interest">
<h3>Select years of interest<a class="headerlink" href="#Select-years-of-interest" title="Link to this heading">ÔÉÅ</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ndbc.available_data</span></code> function has returned a DataFrame with columns ‚Äòid‚Äô, ‚Äòyear‚Äô, and ‚Äòfilename‚Äô. The year column is of type int while the filename and id (5 digit alpha-numeric specifier) are of type string. In this case, the years returned from <code class="docutils literal notranslate"><span class="pre">available_data</span></code> span 1996 to the last year the buoy was operational (currently 2018 for 46022 wind data). For demonstration, we have decided we are interested in the data from 2018, so we will create a new <code class="docutils literal notranslate"><span class="pre">years_of_interest</span></code> DataFrame which
only contains the year 2018.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Slice the available data to only include 2018 and more recent</span>
<span class="n">years_of_interest</span> <span class="o">=</span> <span class="n">available_data</span><span class="p">[</span><span class="n">available_data</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">2018</span><span class="p">]</span>
<span class="n">years_of_interest</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>year</th>
      <th>filename</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1237</th>
      <td>46022</td>
      <td>2018</td>
      <td>46022c2018.txt.gz</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Request-Data-from-NDBC">
<h3>Request Data from NDBC<a class="headerlink" href="#Request-Data-from-NDBC" title="Link to this heading">ÔÉÅ</a></h3>
<p>The filename column in our <code class="docutils literal notranslate"><span class="pre">years_of_interest</span></code> DataFrame and the parameter is needed to request the data. To get the data we can use the <code class="docutils literal notranslate"><span class="pre">ndbc.request_data</span></code> function for each buoy id and year in the passed DataFrame. This function will return the parameter data as a dictionary of DataFrames which may be accessed by buoy id and then the year for multiple buoys or just the year for a single buoy.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get dictionary of parameter data by year</span>
<span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;filenames&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">years_of_interest</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span>
<span class="n">requested_data</span> <span class="o">=</span> <span class="n">ndbc</span><span class="o">.</span><span class="n">request_data</span><span class="p">(</span><span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;parameter&quot;</span><span class="p">],</span> <span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;filenames&quot;</span><span class="p">])</span>
<span class="n">requested_data</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;2018&#39;:         #YY  MM  DD  hh  mm  WDIR  WSPD  GDR   GST  GTIME
 0      2017  12  31  23   0   206   7.8  999  99.0   9999
 1      2017  12  31  23  10   202   8.3  999  99.0   9999
 2      2017  12  31  23  20   199   8.2  999  99.0   9999
 3      2017  12  31  23  30   194   7.6  999  99.0   9999
 4      2017  12  31  23  40   188   6.6  999  99.0   9999
 ...     ...  ..  ..  ..  ..   ...   ...  ...   ...    ...
 18319  2018   5   8  16  10   107   0.9  999  99.0   9999
 18320  2018   5   8  16  20   210   0.3  999  99.0   9999
 18321  2018   5   8  16  30   271   1.1  999  99.0   9999
 18322  2018   5   8  16  40   275   1.4  999  99.0   9999
 18323  2018   5   8  16  50   277   1.4  281   2.4   1642

 [18324 rows x 10 columns]}
</pre></div></div>
</div>
</section>
<section id="Convert-the-DataFrames-to-DateTime-Index">
<h3>Convert the DataFrames to DateTime Index<a class="headerlink" href="#Convert-the-DataFrames-to-DateTime-Index" title="Link to this heading">ÔÉÅ</a></h3>
<p>The data returned for each year has a variable number of columns for the year, month, day, hour, minute, and the way the columns are formatted (this is a primary reason for return a dictionary of DataFrames indexed by years). A common step a user will want to take is to remove the inconsistent NDBC date/ time columns and create a standard DateTime index. The MHKiT function <code class="docutils literal notranslate"><span class="pre">ndbc.to_datetime_index</span></code> will perform this standardization by parsing the NDBC date/ time columns into DateTime format and
setting this as the DataFrame Index and removing the NDBC date/ time columns. This function operates on a DateFrame therefore we will only pass the relevant year of the <code class="docutils literal notranslate"><span class="pre">ndbc_requested_data</span></code> dictionary.</p>
<p>Additionally, NDBC uses ‚Äò99‚Äô, ‚Äò999‚Äô, and ‚Äò9999‚Äô as NaN values. We will replace these values with <code class="docutils literal notranslate"><span class="pre">numpy.NaN</span></code> to prevent errors when manipulating the data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Convert the header dates to a Datetime Index and remove NOAA date columns for each year</span>
<span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;2018&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ndbc</span><span class="o">.</span><span class="n">to_datetime_index</span><span class="p">(</span>
    <span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;parameter&quot;</span><span class="p">],</span> <span class="n">requested_data</span><span class="p">[</span><span class="s2">&quot;2018&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Replace 99, 999, 9999 with NaN</span>
<span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;2018&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;2018&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">99.0</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">999</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">9999</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>

<span class="c1"># Display DataFrame of 46022 data from 2018</span>
<span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;2018&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>WDIR</th>
      <th>WSPD</th>
      <th>GDR</th>
      <th>GST</th>
      <th>GTIME</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2017-12-31 23:00:00</th>
      <td>206.0</td>
      <td>7.8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2017-12-31 23:10:00</th>
      <td>202.0</td>
      <td>8.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2017-12-31 23:20:00</th>
      <td>199.0</td>
      <td>8.2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2017-12-31 23:30:00</th>
      <td>194.0</td>
      <td>7.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2017-12-31 23:40:00</th>
      <td>188.0</td>
      <td>6.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2018-05-08 16:10:00</th>
      <td>107.0</td>
      <td>0.9</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2018-05-08 16:20:00</th>
      <td>210.0</td>
      <td>0.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2018-05-08 16:30:00</th>
      <td>271.0</td>
      <td>1.1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2018-05-08 16:40:00</th>
      <td>275.0</td>
      <td>1.4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2018-05-08 16:50:00</th>
      <td>277.0</td>
      <td>1.4</td>
      <td>281.0</td>
      <td>2.4</td>
      <td>1642.0</td>
    </tr>
  </tbody>
</table>
<p>18324 rows √ó 5 columns</p>
</div></div>
</div>
</section>
</section>
<section id="2.-Request-Surface-Wind-Data-from-WIND-Toolkit">
<h2>2. Request Surface Wind Data from WIND Toolkit<a class="headerlink" href="#2.-Request-Surface-Wind-Data-from-WIND-Toolkit" title="Link to this heading">ÔÉÅ</a></h2>
<p>MHKiT can be used to request historical data from <a class="reference external" href="https://www.nrel.gov/grid/wind-toolkit.html">WIND Toolkit</a>. The WIND Toolkit is a high-spatial-resolution dataset of meteorological parameters covering several offshore regions including California, Hawaii, the Northwest Pacific, and the Mid-Atlantic. The offshore datasets span 2000-2019 (or to 2020 for the Mid-Atlantic region).</p>
<section id="Included-Variables:">
<h3>Included Variables:<a class="headerlink" href="#Included-Variables:" title="Link to this heading">ÔÉÅ</a></h3>
<ul class="simple">
<li><p>Dataset variables included are indexed by <strong>‚Äòlat_lon‚Äô</strong> (latitude and longitude), and a <strong>‚Äòtime_interval‚Äô</strong>. The following variables can be accessed through the <code class="docutils literal notranslate"><span class="pre">request_wtk_point_data</span></code> function and are available at both ‚Äò5-minute‚Äô and ‚Äò1-hour‚Äô time intervals and in all offshore regions:</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable Name</p></th>
<th class="head"><p>Units</p></th>
<th class="head"><p>Height(s) above sea level (m)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Precipitation rate</p></td>
<td><p>mm</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Roughness length</p></td>
<td><p>meters</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-even"><td><p>Sea surface temperature</p></td>
<td><p>degrees Celsius</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-odd"><td><p>Inverse Monin-Obukhov length</p></td>
<td><p>per meter</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>Relative humidity</p></td>
<td><p>%</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>Friction velocity</p></td>
<td><p>meters per second</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>Wind speed</p></td>
<td><p>meters per second</p></td>
<td><p>10, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200</p></td>
</tr>
<tr class="row-odd"><td><p>Wind direction</p></td>
<td><p>degrees true</p></td>
<td><p>10, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200</p></td>
</tr>
<tr class="row-even"><td><p>Temperature</p></td>
<td><p>degrees Celsius</p></td>
<td><p>2, 10, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200</p></td>
</tr>
<tr class="row-odd"><td><p>Pressure</p></td>
<td><p>meters</p></td>
<td><p>0, 100, 200</p></td>
</tr>
</tbody>
</table>
</section>
<section id="Setting-up-Access-to-WIND-Toolkit">
<h3>Setting up Access to WIND Toolkit<a class="headerlink" href="#Setting-up-Access-to-WIND-Toolkit" title="Link to this heading">ÔÉÅ</a></h3>
<p>To access the WIND Toolkit, you will need to configure h5pyd for data access on HSDS. To get your own API key, visit <a class="reference external" href="https://developer.nrel.gov/signup/">https://developer.nrel.gov/signup/</a>. If you have already accessed WPTO Hindcast data, you may skip this step.</p>
<p>To configure h5pyd type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hsconfigure
</pre></div>
</div>
<p>and enter at the prompt:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hs_endpoint = https://developer.nrel.gov/api/hsds
hs_username = None
hs_password = None
hs_api_key = {your key}
</pre></div>
</div>
</section>
</section>
<section id="Using-the-WIND-Toolkit-MHKiT-Functions">
<h2>Using the WIND Toolkit MHKiT Functions<a class="headerlink" href="#Using-the-WIND-Toolkit-MHKiT-Functions" title="Link to this heading">ÔÉÅ</a></h2>
<p>The process of obtaining and manipulating WIND Toolkit data with MHKiT is split into the following steps: - Choose input parameters - Request data from WIND Toolkit</p>
<section id="Choose-input-parameters">
<h3>Choose input parameters<a class="headerlink" href="#Choose-input-parameters" title="Link to this heading">ÔÉÅ</a></h3>
<p>Looking at the help for the <code class="docutils literal notranslate"><span class="pre">wind_toolkit.request_wtk_point_data</span></code> function shows four required input parameters: * time interval * parameter * location * year</p>
<p>A full list of available historical parameters can be found <a class="reference external" href="https://github.com/NREL/hsds-examples/blob/master/datasets/WINDToolkit.md#model">here</a>. Here we are interested in historical surface wind data (<code class="docutils literal notranslate"><span class="pre">'windspeed_10m'</span></code>, <code class="docutils literal notranslate"><span class="pre">'winddirection_10m'</span></code>) and a vertical temperature profile. For demonstration purposes, not all temperature elevations will be used. Additionally, we will use the latitude and longitude of NDBC buoy <code class="docutils literal notranslate"><span class="pre">'46022'</span></code> to later compare to the NDBC dataset. The buoy location can
be found <a class="reference external" href="https://www.ndbc.noaa.gov/data/stations/station_table.txt">here</a>. The <code class="docutils literal notranslate"><span class="pre">elevation_to_string</span></code> can be used to easily combine an array of elevations with a parameter name to create the correctly formatted parameter string. This is demonstrated for the array of temperature parameters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Input parameters for site of interest</span>
<span class="n">temperatures</span> <span class="o">=</span> <span class="n">wind_toolkit</span><span class="o">.</span><span class="n">elevation_to_string</span><span class="p">(</span>
    <span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">160</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">temperatures</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;temperature_2m&#39;,
 &#39;temperature_20m&#39;,
 &#39;temperature_40m&#39;,
 &#39;temperature_80m&#39;,
 &#39;temperature_120m&#39;,
 &#39;temperature_160m&#39;]
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wtk_inputs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;time_interval&quot;</span><span class="p">:</span> <span class="s2">&quot;1-hour&quot;</span><span class="p">,</span>
    <span class="s2">&quot;wind_parameters&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;windspeed_10m&quot;</span><span class="p">,</span> <span class="s2">&quot;winddirection_10m&quot;</span><span class="p">],</span>
    <span class="s2">&quot;temp_parameters&quot;</span><span class="p">:</span> <span class="n">temperatures</span><span class="p">,</span>
    <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2018</span><span class="p">],</span>
    <span class="s2">&quot;lat_lon&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">40.748</span><span class="p">,</span> <span class="o">-</span><span class="mf">124.527</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="Visualize-WIND-Toolkit-Region">
<h3>Visualize WIND Toolkit Region<a class="headerlink" href="#Visualize-WIND-Toolkit-Region" title="Link to this heading">ÔÉÅ</a></h3>
<p>The offshore WIND Toolkit contains four possible regions, each corresponding to separate hindcast simulations: ‚ÄúOffshore_CA‚Äù, ‚ÄúHawaii‚Äù, ‚ÄúNW_Pacific‚Äù, ‚ÄúMid_Atlantic‚Äù. This is automatically determined by MHKiT based on the user-defined latitude-longitude pair. Note that the ‚ÄúNW_Pacific‚Äù and ‚ÄúOffshore_CA‚Äù region overlap. If you desire to use a location in this overlap region, you must specify the preferred region when calling <code class="docutils literal notranslate"><span class="pre">request_wtk_point_data</span></code>.</p>
<p>If you are unsure of the appropriate region, <code class="docutils literal notranslate"><span class="pre">region_selection</span></code> function will return the region that a given latitude-longitude pair corresponds to. MHKiT also provides the <code class="docutils literal notranslate"><span class="pre">plot_region</span></code> function so that users can visualize where their chosen latitude-longitude pair lies in a given region. Note that regions are not rectangular on a latitude-longitude grid. Comparing the location and region is recommended before requesting data. These functions are demonstrated here.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">requested_region</span> <span class="o">=</span> <span class="n">wind_toolkit</span><span class="o">.</span><span class="n">region_selection</span><span class="p">(</span><span class="n">wtk_inputs</span><span class="p">[</span><span class="s2">&quot;lat_lon&quot;</span><span class="p">])</span>
<span class="n">requested_region</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;Offshore_CA&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wind_toolkit</span><span class="o">.</span><span class="n">plot_region</span><span class="p">(</span><span class="n">requested_region</span><span class="p">,</span> <span class="n">lat_lon</span><span class="o">=</span><span class="n">wtk_inputs</span><span class="p">[</span><span class="s2">&quot;lat_lon&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;Axes: title={&#39;center&#39;: &#39;Extent of the WIND Toolkit Offshore_CA region&#39;}, xlabel=&#39;Longitude (deg)&#39;, ylabel=&#39;Latitude (deg)&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/metocean_example_15_1.png" src="_images/metocean_example_15_1.png" />
</div>
</div>
</section>
<section id="Request-data-from-the-WIND-Toolkit">
<h3>Request data from the WIND Toolkit<a class="headerlink" href="#Request-data-from-the-WIND-Toolkit" title="Link to this heading">ÔÉÅ</a></h3>
<p>To get the data we can use the <code class="docutils literal notranslate"><span class="pre">wind_toolkit.request_wtk_point_data</span></code> function with multiple parameters, locations and years. If multiple locations are input, they must correspond to the same hindcast region. If multiple parameters are input they must be available for the same time interval.</p>
<p>This function will return the parameter data as a DataFrame which may be accessed by parameter name and index of the location. Here we only use the single location defined above, so the relevant DataFrame key is <code class="docutils literal notranslate"><span class="pre">'wind_speed_10m_0'</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wtk_wind</span><span class="p">,</span> <span class="n">wtk_metadata</span> <span class="o">=</span> <span class="n">wind_toolkit</span><span class="o">.</span><span class="n">request_wtk_point_data</span><span class="p">(</span>
    <span class="n">wtk_inputs</span><span class="p">[</span><span class="s2">&quot;time_interval&quot;</span><span class="p">],</span>
    <span class="n">wtk_inputs</span><span class="p">[</span><span class="s2">&quot;wind_parameters&quot;</span><span class="p">],</span>
    <span class="n">wtk_inputs</span><span class="p">[</span><span class="s2">&quot;lat_lon&quot;</span><span class="p">],</span>
    <span class="n">wtk_inputs</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">wtk_wind</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>windspeed_10m_0</th>
      <th>winddirection_10m_0</th>
    </tr>
    <tr>
      <th>time_index</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2018-01-01 00:00:00+00:00</th>
      <td>7.78</td>
      <td>179.199997</td>
    </tr>
    <tr>
      <th>2018-01-01 01:00:00+00:00</th>
      <td>7.81</td>
      <td>190.649994</td>
    </tr>
    <tr>
      <th>2018-01-01 02:00:00+00:00</th>
      <td>6.89</td>
      <td>191.690002</td>
    </tr>
    <tr>
      <th>2018-01-01 03:00:00+00:00</th>
      <td>7.58</td>
      <td>190.720001</td>
    </tr>
    <tr>
      <th>2018-01-01 04:00:00+00:00</th>
      <td>8.10</td>
      <td>183.199997</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2018-12-31 19:00:00+00:00</th>
      <td>15.04</td>
      <td>359.070007</td>
    </tr>
    <tr>
      <th>2018-12-31 20:00:00+00:00</th>
      <td>14.59</td>
      <td>358.470001</td>
    </tr>
    <tr>
      <th>2018-12-31 21:00:00+00:00</th>
      <td>14.76</td>
      <td>358.489990</td>
    </tr>
    <tr>
      <th>2018-12-31 22:00:00+00:00</th>
      <td>14.41</td>
      <td>358.269989</td>
    </tr>
    <tr>
      <th>2018-12-31 23:00:00+00:00</th>
      <td>14.34</td>
      <td>359.769989</td>
    </tr>
  </tbody>
</table>
<p>8760 rows √ó 2 columns</p>
</div></div>
</div>
</section>
</section>
<section id="3.-Compare-NDBC-and-WIND-Toolkit-Data">
<h2>3. Compare NDBC and WIND Toolkit Data<a class="headerlink" href="#3.-Compare-NDBC-and-WIND-Toolkit-Data" title="Link to this heading">ÔÉÅ</a></h2>
<p>Wind conditions may be characterized by the speed and direction over a day. A hourly time series of wind speed is a useful way of visualizing the diurnal variation on a give date. A wind rose can visualize variation in wind direction over the same period. Using the historical continuous wind data from NDBC and surface wind data from WIND Toolkit, we can calculate these variables in MHKiT.</p>
<section id="Plot-the-hourly-mean-wind-speeds-on-January-11,-2018">
<h3>Plot the hourly mean wind speeds on January 11, 2018<a class="headerlink" href="#Plot-the-hourly-mean-wind-speeds-on-January-11,-2018" title="Link to this heading">ÔÉÅ</a></h3>
<p>The NDBC data for January 11, 2018 is given in 10 minute intervals. We can get the instantaneous hourly wind data using the DataFrame <code class="docutils literal notranslate"><span class="pre">resample().nearest()</span></code> function. The WIND Toolkit data is already given as instantaneous hourly data. Then, we can plot the speeds vs the hour they occur. Some variation is seen due to difference in method and height.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get WIND Toolkit and NDBC wind data for 2018-01-11</span>
<span class="n">ndbc_hourly_data</span> <span class="o">=</span> <span class="n">ndbc_dict</span><span class="p">[</span><span class="s2">&quot;2018&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;2018-01-11&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">nearest</span><span class="p">()</span>
<span class="n">wtk_hourly_wind</span> <span class="o">=</span> <span class="n">wtk_wind</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;2018-01-11&quot;</span><span class="p">]</span>

<span class="c1"># Plot the timeseries</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Time, UTC (h)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Speed (m/s)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Hourly mean wind speeds on January 11, 2018&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">24</span><span class="p">])</span>
<span class="n">line1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">ndbc_hourly_data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span>
    <span class="n">ndbc_hourly_data</span><span class="p">[</span><span class="s2">&quot;WSPD&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="s2">&quot;o&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;NDBC 4m wind speed&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">line2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">wtk_hourly_wind</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span>
    <span class="n">wtk_hourly_wind</span><span class="p">[</span><span class="s2">&quot;windspeed_10m_0&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="s2">&quot;x&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;WIND Toolkit 10m wind speed&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x232d04a1790&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/metocean_example_19_1.png" src="_images/metocean_example_19_1.png" />
</div>
</div>
</section>
<section id="Create-a-mean-wind-speed-wind-rose-for-January-11,-2018">
<h3>Create a mean wind speed wind rose for January 11, 2018<a class="headerlink" href="#Create-a-mean-wind-speed-wind-rose-for-January-11,-2018" title="Link to this heading">ÔÉÅ</a></h3>
<p>To complement the timeseries of wind speed, we can visualize the variation in wind direction over the day with a wind rose. The MHKiT <code class="docutils literal notranslate"><span class="pre">plot_rose</span></code> function will do this for us. Some variation is seen between NDBC and WIND Toolkit, possibly due to method and height. Users can further investigate different source of metocean data as desired.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the rose bin widths</span>
<span class="n">width_direction</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># in degrees</span>
<span class="n">width_velocity</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># in m/s</span>

<span class="c1"># Plot the wind rose</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plot_rose</span><span class="p">(</span>
    <span class="n">ndbc_hourly_data</span><span class="p">[</span><span class="s2">&quot;WDIR&quot;</span><span class="p">],</span> <span class="n">ndbc_hourly_data</span><span class="p">[</span><span class="s2">&quot;WSPD&quot;</span><span class="p">],</span> <span class="n">width_direction</span><span class="p">,</span> <span class="n">width_velocity</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/metocean_example_21_0.png" src="_images/metocean_example_21_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax2</span> <span class="o">=</span> <span class="n">plot_rose</span><span class="p">(</span>
    <span class="n">wtk_hourly_wind</span><span class="p">[</span><span class="s2">&quot;winddirection_10m_0&quot;</span><span class="p">],</span>
    <span class="n">wtk_hourly_wind</span><span class="p">[</span><span class="s2">&quot;windspeed_10m_0&quot;</span><span class="p">],</span>
    <span class="n">width_direction</span><span class="p">,</span>
    <span class="n">width_velocity</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/metocean_example_22_0.png" src="_images/metocean_example_22_0.png" />
</div>
</div>
</section>
<section id="Plot-vertical-temperature-profile">
<h3>Plot vertical temperature profile<a class="headerlink" href="#Plot-vertical-temperature-profile" title="Link to this heading">ÔÉÅ</a></h3>
<p>The air temperature at several vertical levels can be downloaded from the WIND Toolkit dataset. More or less vertical levels can be defined in the parameter input to <code class="docutils literal notranslate"><span class="pre">request_wtk_point_data</span></code> to increase resolution or decrease computation expense as desired. Note that times are given in UTC, can optionally be converted to local time by finding the time zone of the chosen latitude/longitude pair.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wtk_temp</span><span class="p">,</span> <span class="n">wtk_metadata</span> <span class="o">=</span> <span class="n">wind_toolkit</span><span class="o">.</span><span class="n">request_wtk_point_data</span><span class="p">(</span>
    <span class="n">wtk_inputs</span><span class="p">[</span><span class="s2">&quot;time_interval&quot;</span><span class="p">],</span>
    <span class="n">wtk_inputs</span><span class="p">[</span><span class="s2">&quot;temp_parameters&quot;</span><span class="p">],</span>
    <span class="n">wtk_inputs</span><span class="p">[</span><span class="s2">&quot;lat_lon&quot;</span><span class="p">],</span>
    <span class="n">wtk_inputs</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="c1"># wtk_temp = wtk_temp.shift(-7) # optionally UTC to local time</span>

<span class="c1"># Pick times corresponding to stable and unstable temperature profiles</span>
<span class="n">stable_temp</span> <span class="o">=</span> <span class="n">wtk_temp</span><span class="o">.</span><span class="n">at_time</span><span class="p">(</span><span class="s2">&quot;2018-01-11 03:00:00&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">unstable_temp</span> <span class="o">=</span> <span class="n">wtk_temp</span><span class="o">.</span><span class="n">at_time</span><span class="p">(</span><span class="s2">&quot;2018-01-11 15:00:00&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Find heights from temperature DataFrame columns</span>
<span class="n">heights</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">wtk_temp</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;temperature_&quot;</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">&quot;m_0&quot;</span><span class="p">)</span>
    <span class="n">heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">heights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">heights</span><span class="p">)</span>

<span class="c1"># Plot the profiles</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Temperature (C)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Height (m)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Temperature profiles from January 11, 2018&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">line1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">stable_temp</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="s2">&quot;o-&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;time=03:00:00 UTC&quot;</span><span class="p">)</span>
<span class="n">line2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">unstable_temp</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="s2">&quot;x-&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;time=15:00:00 UTC&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x232d0335690&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/metocean_example_24_1.png" src="_images/metocean_example_24_1.png" />
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="loads_example.html" class="btn btn-neutral float-left" title="MHKiT Loads Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mooring_example.html" class="btn btn-neutral float-right" title="Mooring Module Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, National Renewable Energy Laboratory, Pacific Northwest National Laboratory, and Sandia National Laboratories.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>