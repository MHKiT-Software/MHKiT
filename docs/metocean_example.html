<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MHKiT Metocean Data &mdash; MHKiT v0.7.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/nbsphinx-code-cells.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/mhkit.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MHKiT
          </a>
              <div class="version">
                v0.7.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="qc.html">QC Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="wave.html">Wave Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="river.html">River Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="tidal.html">Tidal Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="power.html">Power Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="loads.html">Loads Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="dolfyn.html">DOLfYN Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utils Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">MHKiT-Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="matlab.html">MHKiT-MATLAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="webinars.html">Webinars</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="citeus.html">Cite Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Online Forum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MHKiT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">MHKiT Metocean Data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/metocean_example.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="MHKiT-Metocean-Data">
<h1>MHKiT Metocean Data<a class="headerlink" href="#MHKiT-Metocean-Data" title="Permalink to this heading"></a></h1>
<p>Metocean data is a useful addition to wave and current ocean data for the design for offshore structures, including wave energy converters (WECs). Metocean data primarily includes information pertaining to the wind, wave, and climate conditions within and over the ocean at a given location.</p>
<p>MHKiT’s <code class="docutils literal notranslate"><span class="pre">wave.io.ndbc</span></code> module includes functions to request and manipulate metocean data from the National Data Buoy Center, including spectral wave density, standard meteorological data and continuous wind speed. The <code class="docutils literal notranslate"><span class="pre">wave.io.hindcast.wind_toolkit</span></code> module includes function to request and manipulate metocean data from the WIND Toolkit datasets including precipitation rate, relative humidity and vertical profiles of wind speed, wind direction, precipitation, temperature, and pressure.</p>
<p>As a demonstration, this notebook will walk through the following steps to compare the surface wind speed and direction at a given location using both NDBC and WIND Toolkit data, and then plot a vertical air temperature profile with WIND Toolkit data.</p>
<ol class="arabic simple">
<li><p>Request Continous Wind Data from NDBC</p></li>
<li><p>Request Surface Wind Data from WIND Toolkit</p></li>
<li><p>Compare NDBC and WIND Toolkit Data</p></li>
<li><p>Request Temperature Data from WIND Toolkit</p></li>
<li><p>Visualize Temperature Data</p></li>
</ol>
<p>We will start by importing the necessary python packages (<code class="docutils literal notranslate"><span class="pre">pandas</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>), and MHKiT submodule (<code class="docutils literal notranslate"><span class="pre">wave.io</span></code>).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from mhkit.wave.io import ndbc
from mhkit.wave.io.hindcast import wind_toolkit
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
</pre></div>
</div>
</div>
</section>
<section id="1.-Request-Continuous-Wind-Data-from-NDBC">
<h1>1. Request Continuous Wind Data from NDBC<a class="headerlink" href="#1.-Request-Continuous-Wind-Data-from-NDBC" title="Permalink to this heading"></a></h1>
<p>MHKiT can be used to request historical data from the National Data Buoy Center (<a class="reference external" href="https://www.ndbc.noaa.gov/">NDBC</a>). This process is split into the following steps:</p>
<ul class="simple">
<li><p>Query available NDBC data</p></li>
<li><p>Select years of interest</p></li>
<li><p>Request data from NDBC</p></li>
<li><p>Convert the DataFrames to DateTime Index</p></li>
</ul>
<section id="Query-available-NDBC-data">
<h2>Query available NDBC data<a class="headerlink" href="#Query-available-NDBC-data" title="Permalink to this heading"></a></h2>
<p>Looking at the help for the <code class="docutils literal notranslate"><span class="pre">ndbc.available_data</span></code> function (<code class="docutils literal notranslate"><span class="pre">help(ndbc.available_data)</span></code>) the function requires a parameter to be specified and optionally the user may provide a station ID as a string. A full list of available historical parameters can be found <a class="reference external" href="https://www.ndbc.noaa.gov/data/historical/">here</a> although only some of these are currently supported. We are interested in historical continuous wind data <code class="docutils literal notranslate"><span class="pre">'cwind'</span></code>. Additionally, we will specify the buoy number as <code class="docutils literal notranslate"><span class="pre">'46022'</span></code>
to only return data associated with this site.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Specify the parameter as continuous wind speeds and the buoy number to be 46022
ndbc_dict = {&#39;parameter&#39;:&#39;cwind&#39;,&#39;buoy_number&#39;:&#39;46022&#39;}
available_data = ndbc.available_data(ndbc_dict[&#39;parameter&#39;], ndbc_dict[&#39;buoy_number&#39;])
available_data
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>year</th>
      <th>filename</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1211</th>
      <td>46022</td>
      <td>1996</td>
      <td>46022c1996.txt.gz</td>
    </tr>
    <tr>
      <th>1212</th>
      <td>46022</td>
      <td>1997</td>
      <td>46022c1997.txt.gz</td>
    </tr>
    <tr>
      <th>1213</th>
      <td>46022</td>
      <td>1998</td>
      <td>46022c1998.txt.gz</td>
    </tr>
    <tr>
      <th>1214</th>
      <td>46022</td>
      <td>1999</td>
      <td>46022c1999.txt.gz</td>
    </tr>
    <tr>
      <th>1215</th>
      <td>46022</td>
      <td>2000</td>
      <td>46022c2000.txt.gz</td>
    </tr>
    <tr>
      <th>1216</th>
      <td>46022</td>
      <td>2001</td>
      <td>46022c2001.txt.gz</td>
    </tr>
    <tr>
      <th>1217</th>
      <td>46022</td>
      <td>2002</td>
      <td>46022c2002.txt.gz</td>
    </tr>
    <tr>
      <th>1218</th>
      <td>46022</td>
      <td>2003</td>
      <td>46022c2003.txt.gz</td>
    </tr>
    <tr>
      <th>1219</th>
      <td>46022</td>
      <td>2004</td>
      <td>46022c2004.txt.gz</td>
    </tr>
    <tr>
      <th>1220</th>
      <td>46022</td>
      <td>2005</td>
      <td>46022c2005.txt.gz</td>
    </tr>
    <tr>
      <th>1221</th>
      <td>46022</td>
      <td>2006</td>
      <td>46022c2006.txt.gz</td>
    </tr>
    <tr>
      <th>1222</th>
      <td>46022</td>
      <td>2007</td>
      <td>46022c2007.txt.gz</td>
    </tr>
    <tr>
      <th>1223</th>
      <td>46022</td>
      <td>2008</td>
      <td>46022c2008.txt.gz</td>
    </tr>
    <tr>
      <th>1224</th>
      <td>46022</td>
      <td>2009</td>
      <td>46022c2009.txt.gz</td>
    </tr>
    <tr>
      <th>1225</th>
      <td>46022</td>
      <td>2010</td>
      <td>46022c2010.txt.gz</td>
    </tr>
    <tr>
      <th>1226</th>
      <td>46022</td>
      <td>2011</td>
      <td>46022c2011.txt.gz</td>
    </tr>
    <tr>
      <th>1227</th>
      <td>46022</td>
      <td>2012</td>
      <td>46022c2012.txt.gz</td>
    </tr>
    <tr>
      <th>1228</th>
      <td>46022</td>
      <td>2013</td>
      <td>46022c2013.txt.gz</td>
    </tr>
    <tr>
      <th>1229</th>
      <td>46022</td>
      <td>2014</td>
      <td>46022c2014.txt.gz</td>
    </tr>
    <tr>
      <th>1230</th>
      <td>46022</td>
      <td>2015</td>
      <td>46022c2015.txt.gz</td>
    </tr>
    <tr>
      <th>1231</th>
      <td>46022</td>
      <td>2016</td>
      <td>46022c2016.txt.gz</td>
    </tr>
    <tr>
      <th>1232</th>
      <td>46022</td>
      <td>2017</td>
      <td>46022c2017.txt.gz</td>
    </tr>
    <tr>
      <th>1233</th>
      <td>46022</td>
      <td>2018</td>
      <td>46022c2018.txt.gz</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Select-years-of-interest">
<h2>Select years of interest<a class="headerlink" href="#Select-years-of-interest" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ndbc.available_data</span></code> function has returned a DataFrame with columns ‘id’, ‘year’, and ‘filename’. The year column is of type int while the filename and id (5 digit alpha-numeric specifier) are of type string. In this case, the years returned from <code class="docutils literal notranslate"><span class="pre">available_data</span></code> span 1996 to the last year the buoy was operational (currently 2018 for 46022 wind data). For demonstration, we have decided we are interested in the data from 2018, so we will create a new <code class="docutils literal notranslate"><span class="pre">years_of_interest</span></code> DataFrame which
only contains the year 2018.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Slice the available data to only include 2018 and more recent
years_of_interest = available_data[available_data.year == 2018]
years_of_interest
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>year</th>
      <th>filename</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1233</th>
      <td>46022</td>
      <td>2018</td>
      <td>46022c2018.txt.gz</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Request-Data-from-NDBC">
<h2>Request Data from NDBC<a class="headerlink" href="#Request-Data-from-NDBC" title="Permalink to this heading"></a></h2>
<p>The filename column in our <code class="docutils literal notranslate"><span class="pre">years_of_interest</span></code> DataFrame and the parameter is needed to request the data. To get the data we can use the <code class="docutils literal notranslate"><span class="pre">ndbc.request_data</span></code> function for each buoy id and year in the passed DataFrame. This function will return the parameter data as a dictionary of DataFrames which may be accessed by buoy id and then the year for multiple buoys or just the year for a single buoy.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Get dictionary of parameter data by year
ndbc_dict[&#39;filenames&#39;] = years_of_interest[&#39;filename&#39;]
requested_data = ndbc.request_data(ndbc_dict[&#39;parameter&#39;], ndbc_dict[&#39;filenames&#39;])
requested_data
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;2018&#39;:         #YY  MM  DD  hh  mm  WDIR  WSPD  GDR   GST  GTIME
 0      2017  12  31  23   0   206   7.8  999  99.0   9999
 1      2017  12  31  23  10   202   8.3  999  99.0   9999
 2      2017  12  31  23  20   199   8.2  999  99.0   9999
 3      2017  12  31  23  30   194   7.6  999  99.0   9999
 4      2017  12  31  23  40   188   6.6  999  99.0   9999
 ...     ...  ..  ..  ..  ..   ...   ...  ...   ...    ...
 18319  2018   5   8  16  10   107   0.9  999  99.0   9999
 18320  2018   5   8  16  20   210   0.3  999  99.0   9999
 18321  2018   5   8  16  30   271   1.1  999  99.0   9999
 18322  2018   5   8  16  40   275   1.4  999  99.0   9999
 18323  2018   5   8  16  50   277   1.4  281   2.4   1642

 [18324 rows x 10 columns]}
</pre></div></div>
</div>
</section>
<section id="Convert-the-DataFrames-to-DateTime-Index">
<h2>Convert the DataFrames to DateTime Index<a class="headerlink" href="#Convert-the-DataFrames-to-DateTime-Index" title="Permalink to this heading"></a></h2>
<p>The data returned for each year has a variable number of columns for the year, month, day, hour, minute, and the way the columns are formatted (this is a primary reason for return a dictionary of DataFrames indexed by years). A common step a user will want to take is to remove the inconsistent NDBC date/ time columns and create a standard DateTime index. The MHKiT function <code class="docutils literal notranslate"><span class="pre">ndbc.to_datetime_index</span></code> will perform this standardization by parsing the NDBC date/ time columns into DateTime format and
setting this as the DataFrame Index and removing the NDBC date/ time columns. This function operates on a DateFrame therefore we will only pass the relevant year of the <code class="docutils literal notranslate"><span class="pre">ndbc_requested_data</span></code> dictionary.</p>
<p>Additionally, NDBC uses ‘99’, ‘999’, and ‘9999’ as NaN values. We will replace these values with <code class="docutils literal notranslate"><span class="pre">numpy.NaN</span></code> to prevent errors when manipulating the data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Convert the header dates to a Datetime Index and remove NOAA date columns for each year
ndbc_dict[&#39;2018&#39;] = ndbc.to_datetime_index(ndbc_dict[&#39;parameter&#39;], requested_data[&#39;2018&#39;])

# Replace 99, 999, 9999 with NaN
ndbc_dict[&#39;2018&#39;] = ndbc_dict[&#39;2018&#39;].replace({99.0:np.NaN, 999:np.NaN, 9999:np.NaN})

# Display DataFrame of 46022 data from 2018
ndbc_dict[&#39;2018&#39;]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>WDIR</th>
      <th>WSPD</th>
      <th>GDR</th>
      <th>GST</th>
      <th>GTIME</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2017-12-31 23:00:00</th>
      <td>206.0</td>
      <td>7.8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2017-12-31 23:10:00</th>
      <td>202.0</td>
      <td>8.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2017-12-31 23:20:00</th>
      <td>199.0</td>
      <td>8.2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2017-12-31 23:30:00</th>
      <td>194.0</td>
      <td>7.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2017-12-31 23:40:00</th>
      <td>188.0</td>
      <td>6.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2018-05-08 16:10:00</th>
      <td>107.0</td>
      <td>0.9</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2018-05-08 16:20:00</th>
      <td>210.0</td>
      <td>0.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2018-05-08 16:30:00</th>
      <td>271.0</td>
      <td>1.1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2018-05-08 16:40:00</th>
      <td>275.0</td>
      <td>1.4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2018-05-08 16:50:00</th>
      <td>277.0</td>
      <td>1.4</td>
      <td>281.0</td>
      <td>2.4</td>
      <td>1642.0</td>
    </tr>
  </tbody>
</table>
<p>18324 rows × 5 columns</p>
</div></div>
</div>
<section id="2.-Request-Surface-Wind-Data-from-WIND-Toolkit">
<h3>2. Request Surface Wind Data from WIND Toolkit<a class="headerlink" href="#2.-Request-Surface-Wind-Data-from-WIND-Toolkit" title="Permalink to this heading"></a></h3>
<p>MHKiT can be used to request historical data from <a class="reference external" href="https://www.nrel.gov/grid/wind-toolkit.html">WIND Toolkit</a>. The WIND Toolkit is a high-spatial-resolution dataset of meteorological parameters covering several offshore regions including California, Hawaii, the Northwest Pacific, and the Mid-Atlantic. The offshore datasets span 2000-2019 (or to 2020 for the Mid-Atlantic region).</p>
</section>
</section>
<section id="Included-Variables:">
<h2>Included Variables:<a class="headerlink" href="#Included-Variables:" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Dataset variables included are indexed by <strong>‘lat_lon’</strong> (latitude and longitude), and a <strong>‘time_interval’</strong>. The following variables can be accessed through the <code class="docutils literal notranslate"><span class="pre">request_wtk_point_data</span></code> function and are available at both ‘5-minute’ and ‘1-hour’ time intervals and in all offshore regions:</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable Name</p></th>
<th class="head"><p>Units</p></th>
<th class="head"><p>Height(s) above sea level (m)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Precipitation rate</p></td>
<td><p>mm</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Roughness length</p></td>
<td><p>meters</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-even"><td><p>Sea surface temperature</p></td>
<td><p>degrees Celsius</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-odd"><td><p>Inverse Monin-Obukhov length</p></td>
<td><p>per meter</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>Relative humidity</p></td>
<td><p>%</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>Friction velocity</p></td>
<td><p>meters per second</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>Wind speed</p></td>
<td><p>meters per second</p></td>
<td><p>10, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200</p></td>
</tr>
<tr class="row-odd"><td><p>Wind direction</p></td>
<td><p>degrees true</p></td>
<td><p>10, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200</p></td>
</tr>
<tr class="row-even"><td><p>Temperature</p></td>
<td><p>degrees Celsius</p></td>
<td><p>2, 10, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200</p></td>
</tr>
<tr class="row-odd"><td><p>Pressure</p></td>
<td><p>meters</p></td>
<td><p>0, 100, 200</p></td>
</tr>
</tbody>
</table>
</section>
<section id="Setting-up-Access-to-WIND-Toolkit">
<h2>Setting up Access to WIND Toolkit<a class="headerlink" href="#Setting-up-Access-to-WIND-Toolkit" title="Permalink to this heading"></a></h2>
<p>To access the WIND Toolkit, you will need to configure h5pyd for data access on HSDS. To get your own API key, visit <a class="reference external" href="https://developer.nrel.gov/signup/">https://developer.nrel.gov/signup/</a>. If you have already accessed WPTO Hindcast data, you may skip this step.</p>
<p>To configure h5phd type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hsconfigure
</pre></div>
</div>
<p>and enter at the prompt:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hs_endpoint = https://developer.nrel.gov/api/hsds
hs_username = None
hs_password = None
hs_api_key = {your key}
</pre></div>
</div>
<section id="Using-the-WIND-Toolkit-MHKiT-Functions">
<h3>Using the WIND Toolkit MHKiT Functions<a class="headerlink" href="#Using-the-WIND-Toolkit-MHKiT-Functions" title="Permalink to this heading"></a></h3>
<p>The process of obtaining and manipulating WIND Toolkit data with MHKiT is split into the following steps: - Choose input parameters - Request data from WIND Toolkit</p>
</section>
</section>
<section id="Choose-input-parameters">
<h2>Choose input parameters<a class="headerlink" href="#Choose-input-parameters" title="Permalink to this heading"></a></h2>
<p>Looking at the help for the <code class="docutils literal notranslate"><span class="pre">wind_toolkit.request_wtk_point_data</span></code> function shows four required input parameters: * time interval * parameter * location * year</p>
<p>A full list of available historical parameters can be found <a class="reference external" href="https://github.com/NREL/hsds-examples/blob/master/datasets/WINDToolkit.md#model">here</a>. Here we are interested in historical surface wind data <code class="docutils literal notranslate"><span class="pre">'windspeed_10m'</span></code>, <code class="docutils literal notranslate"><span class="pre">'winddirection_10m'</span></code>. Additionally, we will use the latitude and longitude of NDBC buoy <code class="docutils literal notranslate"><span class="pre">'46022'</span></code> to later compare to the NDBC dataset. The buoy location can be found <a class="reference external" href="https://www.ndbc.noaa.gov/data/stations/station_table.txt">here</a>. The <code class="docutils literal notranslate"><span class="pre">elevation_to_string</span></code>
can be used to easily combine an array of elevations with a parameter name to create the correctly formatted parameter string. This is demonstrated for the array of temperature parameters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Input parameters for site of interest
temperatures = wind_toolkit.elevation_to_string(&#39;temperature&#39;,[2, 20, 40, 60, 80, 100, 120, 140, 160])
temperatures
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;temperature_2m&#39;,
 &#39;temperature_20m&#39;,
 &#39;temperature_40m&#39;,
 &#39;temperature_60m&#39;,
 &#39;temperature_80m&#39;,
 &#39;temperature_100m&#39;,
 &#39;temperature_120m&#39;,
 &#39;temperature_140m&#39;,
 &#39;temperature_160m&#39;]
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>wtk_inputs = {&#39;time_interval&#39;:&#39;1-hour&#39;,
              &#39;wind_parameters&#39;:[&#39;windspeed_10m&#39;,&#39;winddirection_10m&#39;],
              &#39;temp_parameters&#39;:temperatures,
              &#39;year&#39;:[2018],
              &#39;lat_lon&#39;:(40.748, -124.527)}
</pre></div>
</div>
</div>
</section>
<section id="Visualize-WIND-Toolkit-Region">
<h2>Visualize WIND Toolkit Region<a class="headerlink" href="#Visualize-WIND-Toolkit-Region" title="Permalink to this heading"></a></h2>
<p>The offshore WIND Toolkit contains four possible regions, each corresponding to separate hindcast simulations: “Offshore_CA”, “Hawaii”, “NW_Pacific”, “Mid_Atlantic”. This is automatically determined by MHKiT based on the user-defined latitude-longitude pair. Note that the “NW_Pacific” and “Offshore_CA” region overlap. If you desire to use a location in this overlap region, you must specify the preferred region when calling <code class="docutils literal notranslate"><span class="pre">request_wtk_point_data</span></code>.</p>
<p>If you are unsure of the appropriate region, <code class="docutils literal notranslate"><span class="pre">region_selection</span></code> function will return the region that a given latitude-longitude pair corresponds to. MHKiT also provides the <code class="docutils literal notranslate"><span class="pre">plot_region</span></code> function so that users can visualize where their chosen latitude-longitude pair lies in a given region. Note that regions are not rectangular on a latitude-longitude grid. Comparing the location and region is recommended before requesting data. These functions are demonstrated here.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>requested_region = wind_toolkit.region_selection(wtk_inputs[&#39;lat_lon&#39;])
requested_region
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;Offshore_CA&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>wind_toolkit.plot_region(requested_region,lat_lon=wtk_inputs[&#39;lat_lon&#39;])
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;AxesSubplot:title={&#39;center&#39;:&#39;Extent of the WIND Toolkit Offshore_CA region&#39;}, xlabel=&#39;Longitude (deg)&#39;, ylabel=&#39;Latitude (deg)&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/metocean_example_15_1.png" src="_images/metocean_example_15_1.png" />
</div>
</div>
</section>
<section id="Request-data-from-the-WIND-Toolkit">
<h2>Request data from the WIND Toolkit<a class="headerlink" href="#Request-data-from-the-WIND-Toolkit" title="Permalink to this heading"></a></h2>
<p>To get the data we can use the <code class="docutils literal notranslate"><span class="pre">wind_toolkit.request_wtk_point_data</span></code> function with multiple parameters, locations and years. If multiple locations are input, they must correspond to the same hindcast region. If multiple parameters are input they must be available for the same time interval.</p>
<p>This function will return the parameter data as a DataFrame which may be accessed by parameter name and index of the location. Here we only use the single location defined above, so the relevant DataFrame key is <code class="docutils literal notranslate"><span class="pre">'wind_speed_10m_0'</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>wtk_wind, wtk_metadata = wind_toolkit.request_wtk_point_data(
    wtk_inputs[&#39;time_interval&#39;],wtk_inputs[&#39;wind_parameters&#39;],
    wtk_inputs[&#39;lat_lon&#39;],wtk_inputs[&#39;year&#39;])
wtk_wind
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>windspeed_10m_0</th>
      <th>winddirection_10m_0</th>
    </tr>
    <tr>
      <th>time_index</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2018-01-01 00:00:00+00:00</th>
      <td>7.78</td>
      <td>179.199997</td>
    </tr>
    <tr>
      <th>2018-01-01 01:00:00+00:00</th>
      <td>7.81</td>
      <td>190.649994</td>
    </tr>
    <tr>
      <th>2018-01-01 02:00:00+00:00</th>
      <td>6.89</td>
      <td>191.690002</td>
    </tr>
    <tr>
      <th>2018-01-01 03:00:00+00:00</th>
      <td>7.58</td>
      <td>190.720001</td>
    </tr>
    <tr>
      <th>2018-01-01 04:00:00+00:00</th>
      <td>8.10</td>
      <td>183.199997</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2018-12-31 19:00:00+00:00</th>
      <td>15.04</td>
      <td>359.070007</td>
    </tr>
    <tr>
      <th>2018-12-31 20:00:00+00:00</th>
      <td>14.59</td>
      <td>358.470001</td>
    </tr>
    <tr>
      <th>2018-12-31 21:00:00+00:00</th>
      <td>14.76</td>
      <td>358.489990</td>
    </tr>
    <tr>
      <th>2018-12-31 22:00:00+00:00</th>
      <td>14.41</td>
      <td>358.269989</td>
    </tr>
    <tr>
      <th>2018-12-31 23:00:00+00:00</th>
      <td>14.34</td>
      <td>359.769989</td>
    </tr>
  </tbody>
</table>
<p>8760 rows × 2 columns</p>
</div></div>
</div>
<section id="3.-Compare-NDBC-and-WIND-Toolkit-Data">
<h3>3. Compare NDBC and WIND Toolkit Data<a class="headerlink" href="#3.-Compare-NDBC-and-WIND-Toolkit-Data" title="Permalink to this heading"></a></h3>
<p>Wind conditions may be characterized by the speed and direction over a day. A hourly time series of wind speed is a useful way of visualizing the diurnal variation on a give date. A wind rose can visualize variation in wind direction over the same period. Using the historical continuous wind data from NDBC and surface wind data from WIND Toolkit, we can calculate these variables in MHKiT.</p>
</section>
</section>
<section id="Plot-the-hourly-mean-wind-speeds-on-January-11,-2018">
<h2>Plot the hourly mean wind speeds on January 11, 2018<a class="headerlink" href="#Plot-the-hourly-mean-wind-speeds-on-January-11,-2018" title="Permalink to this heading"></a></h2>
<p>The NDBC data for January 11, 2018 is given in 10 minute intervals. We can get the instantaneous hourly wind data using the DataFrame <code class="docutils literal notranslate"><span class="pre">resample().nearest()</span></code> function. The WIND Toolkit data is already given as instantaneous hourly data. Then, we can plot the speeds vs the hour they occur. Some variation is seen due to difference in method and height.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Get WIND Toolkit and NDBC wind data for 2018-01-11
ndbc_hourly_data = ndbc_dict[&#39;2018&#39;][&#39;2018-01-11&#39;].resample(&#39;h&#39;).nearest()
wtk_hourly_wind = wtk_wind[&#39;2018-01-11&#39;]

# Plot the timeseries
fig = plt.figure()
ax = fig.add_subplot(111)
ax.set_xlabel(&#39;Time, UTC (h)&#39;)
ax.set_ylabel(&#39;Speed (m/s)&#39;)
ax.set_title(&#39;Hourly mean wind speeds on January 11, 2018&#39;)
ax.grid()
ax.set_ylim([5, 14])
ax.set_xlim([0, 24])
line1 = ax.plot(ndbc_hourly_data.index.hour,ndbc_hourly_data[&#39;WSPD&#39;].values,&#39;o&#39;,label=&#39;NDBC 4m wind speed&#39;)
line2 = ax.plot(wtk_hourly_wind.index.hour,wtk_hourly_wind[&#39;windspeed_10m_0&#39;].values,&#39;x&#39;,label=&#39;WIND Toolkit 10m wind speed&#39;)
ax.legend()
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x1d0b8c6d370&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/metocean_example_19_1.png" src="_images/metocean_example_19_1.png" />
</div>
</div>
</section>
<section id="Create-a-mean-wind-speed-wind-rose-for-January-11,-2018">
<h2>Create a mean wind speed wind rose for January 11, 2018<a class="headerlink" href="#Create-a-mean-wind-speed-wind-rose-for-January-11,-2018" title="Permalink to this heading"></a></h2>
<p>To complement the timeseries of wind speed, we can visualize the variation in wind direction over the day with a wind rose. The MHKiT <code class="docutils literal notranslate"><span class="pre">plot_rose</span></code> function will do this for us. Some variation is seen between NDBC and WIND Toolkit, possibly due to method and height. Users can further investigate different source of metocean data as desired.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Set the rose bin widths
width_direction = 10 # in degrees
width_velocity  = 1  # in m/s

# Plot the wind rose
ax = ndbc.plot_rose(ndbc_hourly_data[&#39;WDIR&#39;],ndbc_hourly_data[&#39;WSPD&#39;],
                     width_direction,width_velocity)
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/metocean_example_21_0.png" src="_images/metocean_example_21_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ax2 = ndbc.plot_rose(wtk_hourly_wind[&#39;winddirection_10m_0&#39;],wtk_hourly_wind[&#39;windspeed_10m_0&#39;],
                     width_direction,width_velocity)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/metocean_example_22_0.png" src="_images/metocean_example_22_0.png" />
</div>
</div>
</section>
<section id="Plot-vertical-temperature-profile">
<h2>Plot vertical temperature profile<a class="headerlink" href="#Plot-vertical-temperature-profile" title="Permalink to this heading"></a></h2>
<p>The air temperature at several vertical levels can be downloaded from the WIND Toolkit dataset. More or less vertical levels can be defined in the parameter input to <code class="docutils literal notranslate"><span class="pre">request_wtk_point_data</span></code> to increase resolution or decrease computation expense as desired. Note that times are given in UTC, can can optionally be converted to local time by finding the time zone of the chosen latitude/longitude pair.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>wtk_temp, wtk_metadata = wind_toolkit.request_wtk_point_data(
    wtk_inputs[&#39;time_interval&#39;],wtk_inputs[&#39;temp_parameters&#39;],
    wtk_inputs[&#39;lat_lon&#39;],wtk_inputs[&#39;year&#39;])
# wtk_temp = wtk_temp.shift(-7) # optionally UTC to local time

# Pick times corresponding to stable and unstable temperature profiles
stable_temp = wtk_temp.at_time(&#39;2018-01-11 03:00:00&#39;).values[0]
unstable_temp = wtk_temp.at_time(&#39;2018-01-11 15:00:00&#39;).values[0]

# Find heights from temperature DataFrame columns
heights = []
for s in wtk_temp.keys():
    s = s.removeprefix(&#39;temperature_&#39;)
    s = s.removesuffix(&#39;m_0&#39;)
    heights.append(float(s))
heights = np.array(heights)

# Plot the profiles
fig = plt.figure()
ax = fig.add_subplot(111)
ax.set_xlabel(&#39;Temperature (C)&#39;)
ax.set_ylabel(&#39;Height (m)&#39;)
ax.set_title(&#39;Temperature profiles from January 11, 2018&#39;)
ax.grid()
line1 = ax.plot(stable_temp,heights,&#39;o-&#39;,label=&#39;time=03:00:00 UTC&#39;)
line2 = ax.plot(unstable_temp,heights,&#39;x-&#39;,label=&#39;time=15:00:00 UTC&#39;)
ax.legend()
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:urllib3.connectionpool:Retrying (Retry(total=6, connect=10, read=10, redirect=None, status=None)) after connection broken by &#39;ProxyError(&#39;Cannot connect to proxy.&#39;, ConnectionResetError(10054, &#39;An existing connection was forcibly closed by the remote host&#39;, None, 10054, None))&#39;: /api/hsds/datasets/d-bf1ee746-f22af1ee-ce40-863b0e-18a71b?domain=%2Fnrel%2Fwtk%2Foffshore_ca%2FOffshore_CA_2018.h5&amp;api_key=x9f0SNincVSAIeKKuGDUOhyvfRYmrTzg06vZyeuw
WARNING:urllib3.connectionpool:Retrying (Retry(total=6, connect=10, read=10, redirect=None, status=None)) after connection broken by &#39;ProxyError(&#39;Cannot connect to proxy.&#39;, ConnectionResetError(10054, &#39;An existing connection was forcibly closed by the remote host&#39;, None, 10054, None))&#39;: /api/hsds/datasets/d-bf1ee746-f22af1ee-3ec7-709e83-7740a7?domain=%2Fnrel%2Fwtk%2Foffshore_ca%2FOffshore_CA_2018.h5&amp;api_key=x9f0SNincVSAIeKKuGDUOhyvfRYmrTzg06vZyeuw
WARNING:urllib3.connectionpool:Retrying (Retry(total=4, connect=10, read=10, redirect=None, status=None)) after connection broken by &#39;ProxyError(&#39;Cannot connect to proxy.&#39;, ConnectionResetError(10054, &#39;An existing connection was forcibly closed by the remote host&#39;, None, 10054, None))&#39;: /api/hsds/datasets/d-bf1ee746-f22af1ee-8082-2ff043-910c51?domain=%2Fnrel%2Fwtk%2Foffshore_ca%2FOffshore_CA_2018.h5&amp;api_key=x9f0SNincVSAIeKKuGDUOhyvfRYmrTzg06vZyeuw
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x1d0af709e20&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/metocean_example_24_2.png" src="_images/metocean_example_24_2.png" />
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, National Renewable Energy Laboratory, Pacific Northwest National Laboratory, and Sandia National Laboratories.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-164358105-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-164358105-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>